/* app-select styles (neumorphism + customizable select PE) */
/* ------------------------------------------------------------------ */

:host {
  font: inherit;

  /* Theme tokens */
  --select-radius: 14px;
  --select-padding-y: 0.5rem;
  --select-padding-x: 0.5rem;
  --surface: #eef1f5;
  --surface-2: #f6f8fb;
  --text: #1f2a37;
  --muted: #6b7280;
  --ring: rgba(0, 0, 0, 0.08);
  --shadow-dark: rgba(0, 0, 0, 0.18);
  --shadow-light: rgba(255, 255, 255, 0.9);
  --focus: #5468ff;
}

.select-wrap {
  position: relative;
  box-sizing: border-box;
  inline-size: 100%;
  border-radius: var(--select-radius);
  background: linear-gradient(145deg, var(--surface), var(--surface-2));
  box-shadow: var(--rs-shadow-inset, inset 4px 4px 8px rgba(0,0,0,.06), inset -4px -4px 8px rgba(255,255,255,.8));
  transition: box-shadow 160ms ease;
}

/* Native select */
#native {
  box-sizing: border-box;
  inline-size: 100%;
  width: 100%;
  border: 0;
  background: transparent;
  color: var(--text);
  font: inherit;
  border-radius: var(--select-radius);
  padding: var(--select-padding-y) calc(var(--select-padding-x) + 1rem) var(--select-padding-y) var(--select-padding-x);
  line-height: 1.25;

  /* Fjern native pil i klassisk sti */
  appearance: none;
  -webkit-appearance: none;
  background-image: none;
  outline: none;
}

:host([disabled]) #native {
  cursor: not-allowed;
  opacity: 0.6;
}

.select-button {
  border: 0;
  background: transparent;
  cursor: pointer;
  padding: .125rem .25rem;
  border-radius: .5rem;
  box-shadow: 0 0 0 1px rgba(0,0,0,.08);
}

/* Focus ring (neumorphism-flair) */
#native:focus-visible {
  box-shadow:
    0 0 0 2px var(--surface),
    0 0 0 5px var(--focus);
  border-radius: var(--select-radius);
}

/* Fallback-chevron (vises kun i ikke-PE-browsere) */
.chevron {
  position: absolute;
  inset-inline-end: 0.85rem;
  top: 50%;
  transform: translateY(-50%);
  width: 0.6rem;
  height: 0.6rem;
  border-right: 2px solid var(--muted);
  border-bottom: 2px solid var(--muted);
  rotate: 45deg;
  pointer-events: none;
}

/* Placeholder option */
option[data-placeholder="true"] { color: var(--muted); }

/* ---------------------------
   Customizable Select (PE)
   --------------------------- */
@supports (appearance: base-select) {
  /* Skjul fallback-pil i PE-stien (fix for dobbelte pile) */
  .chevron { display: none; }

  #native,
  ::picker(select) {
    appearance: base-select;
  }

  /* Pil tegnes af UA; vi animerer rotation ved Ã¥ben */
  #native::picker-icon { transition: rotate 150ms ease; }
  #native:open::picker-icon { rotate: 180deg; }

  /* Popup-panelets look */
  ::picker(select) {
    border-radius: calc(var(--select-radius) - 2px);
    box-shadow:
      12px 12px 24px var(--shadow-dark),
      -12px -12px 24px var(--shadow-light),
      0 0 0 1px var(--ring) inset;
    background: linear-gradient(145deg, var(--surface-2), var(--surface));
    padding-block: 4px;
    overflow: auto;
  }

  /* Option styling inde i picker */
  option {
    padding: 0.6rem 0.9rem;
    border-radius: 10px;
  }

  option:checked {
    background: color-mix(in oklab, var(--focus) 18%, white);
    color: var(--text);
    outline: none;
  }

  option::checkmark {
    margin-inline-end: 0.4rem;
  }
}
